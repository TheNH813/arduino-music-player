This project is a music player for the Arduino using the .MOD, .S3M, .XM and .IT file formats. It converts them into a special compressed format that fits into the Arduino's flash memory more easily and plays them. Disconnect output speakers/amiplifier when uploading the code or you'l hear the data transfer. You will need to connect a Resistor DAC across pins 0,1,2,3,4,5,6 and 7 with pin 0 being the least signifigant bit. I reccommend a R2R Ladder for best sound quality, but you could also use resistors of doubling value. Anything within about 5% tolerance of being double the resistor before it should work. If the module file contains a loop, instead of repeating the whole file, it repeats from that point upon reaching the end of playback.

To create files for this program, make sure that the modules are under 23kiB or smaller after conversion or they will not fit. Compressing the samples to lower quality or using simpler instrument samples may help. The Arduino UNO only has 32KiB of memory, about 2-3 KiB are used by the bootloader, about 5KiB by the code of the main PMF Player program, and the rest is needed for the actual audio samples and tracker-type audio data. Use the program found in ./pmf_converter/bin/pmf_converter.exe to convert the files. Type the command like this "pmf_converter.exe -hex -i </path/to/module[.mod/.s3m/.it/.xm]> -o </path/to/output[.pmf]>. Open the resulting .pmf file in Geany/Notepad++ or a similar program and copy the contents into your clipboard. Paste them into the main pmf_player.ino file in the Arduino IDE, replacing the existing hexidecimal data in the variable named s_pmf_file. Save the project as another name if you want, like pmf_songname or something.

If you use Linux or Mac instead of Windows, I have confirmed the convertor works correctly on all formats other then .xm and a few nonstandard .it modules created by programs other then ImpluseTracker, MilkyTracker or ModPlug Tracker. Some XM modules may cause it to hang during converting, if this is the case, convert it to a different module format before converting.

There was a problem in the original code making it impossible to compile the program in newer versions of the Arduino IDE, or on Arduino UNO boards in any version of the IDE. All it required was changing some register parameters that it used in an operation. A big thank you goes out to the user on the Arduino IRC who helped me debug this. I'v recenetly updated it to now support ATMega32u4 based boards, which was quite simple.

In the future, I will be most likely making small modifications to improve performance. This is, however, after I become more experienced in programming for the Arduino. I'm new to GitHub, and this is the first time I ever forked a project. If I did something wrong or you have any advice to give, please tell me.

*** This project is originally created by JarkkoPFC ***
